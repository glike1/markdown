
# 第三章 指令系统
5、 要访问特殊功能寄存器和片外数据存储器，应采用哪些寻址方式?
访问特殊功能寄存器，应采用直接寻址、位寻址方式。
访问外部数据存储器，应采用寄存器间接寻址方式。
7、 对89C51片内RAM的高128字节的地址空间寻址要注意什么？
用直接寻址，位寻址，寄存器寻址
10、   如何访问SFR，可使用哪些寻址方式?
可使用直接寻址、位寻址、寄存器寻址
11、  如何访问片外RAM单元，可使用哪些寻址方式?
    只能采用寄存器间接寻址
12、  如何访问片内RAM单元，可使用哪些寻址方式?
    低128字节：直接寻址，位寻址，寄存器间接寻址，寄存器寻址（R0-R7）



# 第六章
2、单片机用内部定时方法产生频率为100KHz等宽距形波，假定单片机的晶振频率为12MHz。请编程实现。
T0低5位：1BH,T0高8位：FFH
```python
MOV TMOD,#00H;设置定时器TO工作于模式0
MOV TLO,#1BH;设置5ms定时初值
MOV THO,#0FFH 
SETB TRO;启动T0
LOOP：JBC TFO,L1;查询到定时时间到？时间到转L1
SJMP LOOP；时间未到转LOOP，继续查询
L1：MOV TLO，#1BH；重新置入定时初值
MOV THO，#OFFH CPL P1.0;输出取反，形成等宽矩形波
SJMP LOOP;重复循环
```
3、89C51定时器有哪几种工作模式？有何区别？
有四种工作模式：模式0，模式1，模式2，模式3
（1）模式0：选择定时器的高8位和低5位组成一个13位定时器/计数器。TL低5位溢出时向TH进位，TH溢出时向中断标志位TF进位，并申请中断。定时时间t=（213-初值）×振荡周期×12；计数长度位213-8192个外部脉冲
（2）模式1：与模式0的唯一差别是寄存器TH和TL以全部16位参与操作。定时时间t=（216-初值）×振荡周期×12；计数长度位216-65536个外部脉冲
（3）模式2：把TLO和TL1配置成一个自动重装载的8位定时器/计数器。TL用作8位计数器，TH用以保存初值。
TL计数溢出时不仅使TFO置1，而且还自动将TH中的内容重新装载到TL中。定时时间t=（28-初值）×振荡周期×12；计数长度位28=256个外部脉冲。
4、89C51单片机内部设有几个定时器/计数器？它们是由哪些特殊功能寄存器组成？
有2个定时器/计数器，有工作方式寄存器TMOD，控制寄存器TCON，中断允许寄存器IE，中断优先级寄存器IP
一位计数器，按p3.2数码管加1，到9后回0 数码管数据p0,数码管控制p2口,按键p3.2口
7、当定时器T0用作模式3时，由于TR1位已被T0占用，如何控制定时器T1的开启和关闭？
用T1控制位C/T切换定时器或计数器工作方式就可以使T1运行。定时器T1无工作模式3，将T1设置为工作模式3，就会使T1立即停止计数，关闭。
8、以定时器/计数器１进行外部事件计数。每计数1000个脉冲后，定时器T1转为定时工作方式。定时10ms后，又转为计数方式，如此循环不止。假定单片机晶振频率为6MHz，请使用模式1编程实现。
T0为定时器时初值：
T1为计时器时初值：

```x86asm
L1:MOV TMOD,#50H：设置T1为计数方式且工作模式为1
MOV TH1,#OFCH;置入计数初值
MOV TL1,#18H SETB TR1启动T1计数器
LOOP1:JBC TF1,L2;查询计数溢出？有溢出（计数满1000个）转L2
SJMP LOOP1;无溢出转LOOP1，继续查询；
L2:CLR TR1;关闭T1
MOV TMOD,#10H:设置T1为定时方式且工作与模式1置入定时10ms初值
MOV TH1,#OECH 
MOV TL1,#78H 
SETB TR1;启动T1定时
LO0P2:JBC TF1,L1;查询10ms时间到？时间到，转L1
      SJMP LOOP2;时间未到，转L00P2，继续查询
```
9、一个定时器的定时时间有限，如何实现两个定时器的串行定时，以满足较长定时时间的要求？
可以进行级连法，满足较长定时时间的要求。
10、使用一个定时器，如何通过软、硬件结合的方法，实现较长时间的定时？
设定好定时器的定时时间，采用中断方式用软件设置计数次数，进行溢出次数累计，从而得到较长的时间。
13、已知89C51单片机的fosc=6MHz, 请利用T0和P1.0输出矩形波。矩形波高电平宽50μs，低电平宽300μs.
TO采用模式2作为504s定时时的初值：
所以作300p s定时时的初值：
MOV TMOD，#02H：设置定时器T0工作于模式2
```x86asm
L2:CLR P1.0 ;P1.0输出低电平
MOV THO,#6AH;置入定时300μs初值
MOV TLO,#6AH 
SETB TRO;启动
TO LOOP1:JBC TFO,L1;查询300u s时间到？时间到，转L1
SJMP LOOP1;时间未到，转LOOP1，继续查询
L1:SETB P1.0;P1.0输出高电平
CLR TRO;关闭TO 
MOV TH0,#0E7H;置入定时300u s初值
MOV TLO,#0E7H 
SETB TRO;启动TO 
LO0P2:JBC TFO,L2;查询50u s时间到？时间到，转L2
SJMP LOOP2;时间未到，转LOOP2，继续查询
```
14、已知89C51单片机的fosc=12MHz, 用T1定时。试编程由P1.0和P1.1引脚分别输出周期为 2ms和500μs的方波。
采用模式0作定时初值：
所以
```x86asm
MOV R2,#04H;R2为"250μs"计数器，置入初值4
CLR  P1.0 ;P1.0输出低电平
CLR  P1.1 ;P1.1输出低电平
MOV  TMOD,#00H 
L2:MOV THI,#0F8H ;置入定时250μs初值
MOV  TL1,#06H 
SETB TR1 ;启动T1
LOOP:JBC  TFI，L1 ;查询250μs时间到？时间到，转L1
SJMP LOOP ;时间未到，转LOOP，继续查询
L1:CPL  P1.1 ;P1.1输出取反，形成周期为500μs 
CLR TRI;关闭T1
DJNZ R2,L2 ;"250μs"计数器减1，到1ms吗？未到转12
CPL P1.0;P1.0输出取反，形成周期为2ms方波
MOV R2，#04H ;重置"2504 s"计数器初值4
LJMP L2 ;重复循环
```
15、单片机8031的时钟频率为6MHz,若要求定时值分别为0.1ms,1ms,10ms,定时器0工作在模式0、模式1和模式2时，其定时器初值各应是多少？
(1)0.1ms
模式0：T0低5位01110B=0EH，T0高8位：11111110B=FEH
模式1：
模式2：
(2)1ms
模式0：T0低5位01100B=0CH，T0高8位:11110000B=F0H
模式1：
模式2：在此情况下最长定时为512μs，无法一次实现定时1ms，可用0.1ms循环10次
(3)10ms
模式0：T0低5位11000B=18H，T0高8位：01100011B=63H
模式1：
模式2：在此情况下最长定时为512μs，无法一次实现定时10ms，用0.1ms循环100次